#!/bin/bash

# ===================================
# ARQUIVO: railway-build.sh
# ONDE SALVAR: Raiz do projeto
# ===================================
# Script que o Railway vai executar
# para preparar o projeto
# ===================================

echo "ğŸš€ Iniciando build do projeto..."

# Instalar dependÃªncias do Composer
echo "ğŸ“¦ Instalando dependÃªncias PHP..."
composer install --no-dev --optimize-autoload

# Gerar chave da aplicaÃ§Ã£o
echo "ğŸ”‘ Gerando APP_KEY..."
php artisan key:generate --force

# Rodar migrations
echo "ğŸ—„ï¸ Criando tabelas no banco..."
php artisan migrate --force

# Popular banco de dados
echo "ğŸŒ± Populando banco de dados..."
php artisan db:seed --force

# Limpar e otimizar cache
echo "ğŸ§¹ Otimizando aplicaÃ§Ã£o..."
php artisan config:cache
php artisan route:cache
php artisan view:cache

echo "âœ… Build concluÃ­do com sucesso!"